<!DOCTYPE HTML>
<html>
  <head>
    <title>BloomAPI: Contribute</title>
    <link rel="stylesheet" href="css/style.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="Setup a development environment, test, and contribute to BloomAPI" />
  </head>
  <body>
    <nav class="cover">
      <div>
        <h1 class="pull-left"><a href="/">bloom.api</a></h1>
        <ul class="pull-right">
          <li><a href="/">home</a></li>
          <li><a href="/search">search</a></li>
          <li><a href="/documentation">documentation</a></li>
          <li class="active"><a href="/contribute">contribute</a></li>
        </ul>
      </div>
    </nav>
    <div class="row-skipnav">
      <h1>Contributing to BloomAPI</h1>
      <p>If you would like to contribute to BloomAPI. Please reach out to <a href="http://www.mikewasser.com/" target="_blank">Michael Wasser</a>.</p> If you'd just like to explore the source/ setup a development environment, see the instructions below.</p>
      <h2>Development Environment</h2>
      <h3>Source Code</h3>
      <p>Checkout the latest code from the <a href="http://github.com/untoldone/bloomapi" target="_blank">github repository</a>.</p>
      <code>git clone https://github.com/untoldone/bloomapi.git</code>
      <h3>Dependencies</h3>
      <p>BloomAPI has the following runtime dependencies</p>
      <ul>
        <li>nodejs 0.10+ (and a number of nodejs packages installable via npm)</li>
        <li>postgreSQL 9.1+</li>
        <li>pdftotext (command line tool)</li>
        <li>p7zip</li>
      </ul>
      <h4>Dependency installation on mac OSX</h4>
      <p>Since several dependencies require you build source code, XCode must be installed with the Command Line Tools option enabled to complete the following instructions.</p>
      <p>Using <a href="https://github.com/mxcl/homebrew" target="_blank">homebrew</a>:</p>
      <code>brew install nodejs p7zip xpdf postgresql
cd &#60bloomapi source dir&#62
npm install
      </code>
      <h4>Dependency installation on ubuntu 13.04</h4>
      <code>sudo apt-get install -y p7zip-full poppler-utils g++ make postgresql-9.1 postgresql-server-dev-9.1 software-properties-common
sudo add-apt-repository -y ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install -y nodejs
cd &#60bloomapi source dir&#62
npm install
      </code>
      <h4>Dependency Troubleshooting</h4>
      <p>If you are having trouble with the bootstrap task or running server, try running <code>node make check</code> to verify that dependencies have been properly installed.</p>
      <h3>Bootstrap</h3>
      <p>The first time you run your bloomapi environment, you will need to have setup the database schema, and fetched/insert the source data. This process has been automated once bloomapi is configured.</p>
      <p>To configure bloomapi, copy <code>./config.js.sample</code> to <code>./config.js</code> and edit the default values. Note that the database configured should already be created and the user should have access to it. If you haven't created the database yet, you can create it using <code>sudo su postgres -c "psql -c 'CREATE DATABASE bloomapi'"</code> on a ubuntu installation</p>
      <p>Once configured, run <code>node make bootstrap</code> to automatically create the database schema, fetch the data files from their respective source, and import their data. Bootstrapping currently takes approximately 20 minutes for the full NPI dissemination + 10 minutes for every weekly dissemination imported on Rackspace small instance.</p>
      <h3>Running Bloom</h3>
      <p>Once bootstrapped, bloomapi can be run using <code>node make server</code>. BloomAPI will listen on port 3000 for web requests.</p>
      <h2>Testing</h2>
      <ol>
        <li>install jasmine-node globally with <code>sudo npm i -g jasmine-node</code></li>
        <li>Run tests with <code>jasmine-node spec</code> from the root of the source directory</li>
      </ol>
      <h2>Deploy</h2>
      <p>If you would like to deploy your own production-ready version of bloomapi, see the instructions in the <a href="/documentation">documentation</a>.</p>
      <h2>BloomAPI Roadmap</h2>
      <p>See the <a href="http://github.com/untoldone/bloomapi" target="_blank">github readme</a> for a detailed roadmap</p>
    </div>
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', '{{config.googleAnalytics.trackingID}}', '{{config.googleAnalytics.domain}}');
      ga('send', 'pageview');
    </script>
  </body>
</html>
